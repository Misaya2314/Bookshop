# æ•°æ®åº“é›†åˆç»“æ„æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†æ ¡å›­äºŒæ‰‹ä¹¦åº—å¾®ä¿¡å°ç¨‹åºçš„æ•°æ®åº“é›†åˆç»“æ„ï¼ŒåŒ…æ‹¬å›¾ä¹¦ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€è´­ç‰©è½¦ç­‰æ ¸å¿ƒåŠŸèƒ½çš„æ•°æ®æ¨¡å‹ã€‚

**äº‘å¼€å‘ç¯å¢ƒ ID**: `cloud1-8gbfcrr39555713f`

---

## ğŸ“š é›†åˆåˆ—è¡¨

| é›†åˆåç§° | è¯´æ˜         | è®°å½•æ•°é‡ï¼ˆä¼°ç®—ï¼‰ |
| -------- | ------------ | ---------------- |
| `books`  | å›¾ä¹¦ä¿¡æ¯ç®¡ç† | 500+             |
| `users`  | ç”¨æˆ·ä¿¡æ¯ç®¡ç† | 1000+            |
| `cart`   | è´­ç‰©è½¦ç®¡ç†   | åŠ¨æ€             |

---

## ğŸ“– books é›†åˆ

**ç”¨é€”**: å­˜å‚¨å›¾ä¹¦å•†å“ä¿¡æ¯ï¼ŒåŒ…æ‹¬å›¾ä¹¦è¯¦æƒ…ã€ä»·æ ¼ã€åº“å­˜ã€å•†å®¶ä¿¡æ¯ç­‰

### å­—æ®µç»“æ„

| å­—æ®µå          | ç±»å‹   | å¿…å¡« | è¯´æ˜                   | ç¤ºä¾‹å€¼                                |
| --------------- | ------ | ---- | ---------------------- | ------------------------------------- |
| `_id`           | String | âœ…   | å›¾ä¹¦å”¯ä¸€æ ‡è¯†           | `"2ed3518f6843b1f7021c27270..."`      |
| `title`         | String | âœ…   | å›¾ä¹¦æ ‡é¢˜               | `"ç®—æ³•å¯¼è®º"`                          |
| `author`        | String | âœ…   | ä½œè€…                   | `"Thomas H. Cormen"`                  |
| `price`         | Number | âœ…   | ç°ä»·ï¼ˆå…ƒï¼‰             | `45.00`                               |
| `originalPrice` | Number | âŒ   | åŸä»·ï¼ˆå…ƒï¼‰             | `50.00`                               |
| `stock`         | Number | âœ…   | åº“å­˜æ•°é‡               | `20`                                  |
| `categoryId`    | Number | âœ…   | åˆ†ç±» ID                | `1`                                   |
| `subCategoryId` | String | âŒ   | å­åˆ†ç±»æ ‡è¯†             | `"textbook"`                          |
| `description`   | String | âœ…   | å›¾ä¹¦æè¿°               | `"ç»å…¸ç®—æ³•æ•™æï¼Œé€‚åˆè®¡ç®—æœºä¸“ä¸šå­¦ç”Ÿ"`  |
| `condition`     | String | âœ…   | å›¾ä¹¦çŠ¶æ€               | `"è‰¯å¥½"` / `"å…¨æ–°"` / `"ä¸€èˆ¬"`        |
| `publisher`     | String | âŒ   | å‡ºç‰ˆç¤¾                 | `"æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾"`                    |
| `isbn`          | String | âŒ   | ISBN å·                | `"9787111407010"`                     |
| `icon`          | String | âœ…   | emoji å›¾æ ‡             | `"ğŸ“š"`                                |
| `images`        | Array  | âŒ   | å›¾ç‰‡æ•°ç»„               | `["cloud://xxx/book-covers/xxx.jpg"]` |
| `merchantId`    | String | âœ…   | å•†å®¶ IDï¼ˆç”¨æˆ· openidï¼‰ | `"system"`                            |
| `merchantName`  | String | âœ…   | å•†å®¶åç§°               | `"ç³»ç»Ÿç®¡ç†å‘˜"`                        |
| `sales`         | Number | âœ…   | é”€é‡                   | `156`                                 |
| `rating`        | Number | âœ…   | è¯„åˆ†ï¼ˆ1-5 åˆ†ï¼‰         | `4.5`                                 |
| `views`         | Number | âœ…   | æµè§ˆé‡                 | `0`                                   |
| `status`        | String | âœ…   | çŠ¶æ€                   | `"active"` / `"deleted"`              |
| `createTime`    | Date   | âœ…   | åˆ›å»ºæ—¶é—´               | `2025-06-15T18:38:36.000Z`            |
| `updateTime`    | Date   | âœ…   | æ›´æ–°æ—¶é—´               | `2025-06-15T18:40:05.000Z`            |

### åˆ†ç±»è¯´æ˜

#### ä¸»åˆ†ç±»ï¼ˆcategoryIdï¼‰

| ID  | åç§°   | è¯´æ˜                   |
| --- | ------ | ---------------------- |
| 1   | è®¡ç®—æœº | ç¼–ç¨‹ã€ç®—æ³•ã€æ•°æ®ç»“æ„ç­‰ |
| 2   | åŒ»å­¦   | åŒ»å­¦æ•™æã€ä¸´åºŠæŒ‡å—ç­‰   |
| 3   | ç®¡ç†å­¦ | ç®¡ç†ç†è®ºã€æ¡ˆä¾‹åˆ†æç­‰   |
| 4   | è‹±è¯­   | è‹±è¯­æ•™æã€è€ƒè¯•èµ„æ–™ç­‰   |
| 5   | æ³•å¾‹   | æ³•å­¦æ•™æã€æ³•è§„æ±‡ç¼–ç­‰   |
| 6   | ç†å·¥   | æ•°å­¦ã€ç‰©ç†ã€åŒ–å­¦ç­‰     |
| 7   | è‰ºæœ¯   | ç¾æœ¯ã€éŸ³ä¹ã€è®¾è®¡ç­‰     |

#### å­åˆ†ç±»ï¼ˆsubCategoryIdï¼‰

| æ ‡è¯†        | åç§°     | è¯´æ˜         |
| ----------- | -------- | ------------ |
| `textbook`  | æ•™æ     | æ­£å¼æ•™å­¦ç”¨ä¹¦ |
| `reference` | å‚è€ƒä¹¦   | è¾…åŠ©å­¦ä¹ èµ„æ–™ |
| `exam`      | è€ƒç ”èµ„æ–™ | è€ƒè¯•å¤ä¹ ææ–™ |

---

## ğŸ‘¤ users é›†åˆ

**ç”¨é€”**: å­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€å­¦ç±ä¿¡æ¯ã€å•†å®¶è®¤è¯çŠ¶æ€ç­‰

### å­—æ®µç»“æ„

| å­—æ®µå           | ç±»å‹    | å¿…å¡« | è¯´æ˜         | ç¤ºä¾‹å€¼                                           |
| ---------------- | ------- | ---- | ------------ | ------------------------------------------------ |
| `_id`            | String  | âœ…   | ç”¨æˆ·å”¯ä¸€æ ‡è¯† | `"2ed3518f6843b1f7021c27270..."`                 |
| `openid`         | String  | âœ…   | å¾®ä¿¡ç”¨æˆ·æ ‡è¯† | `"oYYEH7MKF20_IGr_r0rbcnh2t4Mc"`                 |
| `nickName`       | String  | âœ…   | ç”¨æˆ·æ˜µç§°     | `"å¾®ä¿¡ç”¨æˆ·"`                                     |
| `avatarUrl`      | String  | âŒ   | å¤´åƒ URL     | `"cloud://cloud1-8gbfcrr39555713f.636c-..."`     |
| `phone`          | String  | âŒ   | æ‰‹æœºå·       | `"13678923950"`                                  |
| `campus`         | String  | âŒ   | æ ¡åŒº         | `"æœé˜³åŒºï¼ˆä¸»æ ¡åŒºï¼‰"`                             |
| `college`        | String  | âŒ   | å­¦é™¢         | `"è®¡ç®—æœºå­¦é™¢"`                                   |
| `major`          | String  | âŒ   | ä¸“ä¸š         | `"è½¯ä»¶å·¥ç¨‹"`                                     |
| `grade`          | String  | âŒ   | å¹´çº§         | `"å¤§äºŒ"`                                         |
| `isMerchant`     | Boolean | âœ…   | æ˜¯å¦ä¸ºå•†å®¶   | `false`                                          |
| `merchantStatus` | String  | âŒ   | å•†å®¶è®¤è¯çŠ¶æ€ | `""` / `"pending"` / `"approved"` / `"rejected"` |
| `isFirstLogin`   | Boolean | âœ…   | æ˜¯å¦é¦–æ¬¡ç™»å½• | `false`                                          |
| `createTime`     | Date    | âœ…   | æ³¨å†Œæ—¶é—´     | `2025-06-07T11:28:55.000Z`                       |
| `updateTime`     | Date    | âœ…   | æ›´æ–°æ—¶é—´     | `2025-06-14T20:17:54.000Z`                       |

### å•†å®¶çŠ¶æ€è¯´æ˜

| çŠ¶æ€å€¼       | è¯´æ˜           |
| ------------ | -------------- |
| `""`         | æœªç”³è¯·å•†å®¶è®¤è¯ |
| `"pending"`  | ç”³è¯·å®¡æ ¸ä¸­     |
| `"approved"` | è®¤è¯é€šè¿‡       |
| `"rejected"` | è®¤è¯è¢«æ‹’ç»     |

---

## ğŸ›’ cart é›†åˆ

**ç”¨é€”**: å­˜å‚¨ç”¨æˆ·è´­ç‰©è½¦ä¿¡æ¯ï¼Œæ”¯æŒå¤šå•†å®¶ã€å¤šå•†å“ç®¡ç†

### å­—æ®µç»“æ„

| å­—æ®µå          | ç±»å‹    | å¿…å¡« | è¯´æ˜             | ç¤ºä¾‹å€¼                            |
| --------------- | ------- | ---- | ---------------- | --------------------------------- |
| `_id`           | String  | âœ…   | è´­ç‰©è½¦é¡¹å”¯ä¸€æ ‡è¯† | `"29dca3d5684ea2ac02dc44297..."`  |
| `openid`        | String  | âœ…   | ç”¨æˆ·æ ‡è¯†         | `"oYYEH7MKF20_IGr_r0rbcnh2t4Mc"`  |
| `bookId`        | String  | âœ…   | å›¾ä¹¦ ID          | `"adea466684390360218c80c6b15ca"` |
| `title`         | String  | âœ…   | å›¾ä¹¦æ ‡é¢˜         | `"ç®—æ³•å¯¼è®º"`                      |
| `price`         | Number  | âœ…   | å•†å“ä»·æ ¼         | `68`                              |
| `originalPrice` | Number  | âŒ   | å•†å“åŸä»·         | `68`                              |
| `images`        | Array   | âŒ   | å•†å“å›¾ç‰‡         | `[]`                              |
| `quantity`      | Number  | âœ…   | è´­ä¹°æ•°é‡         | `1`                               |
| `stock`         | Number  | âœ…   | åº“å­˜æ•°é‡         | `15`                              |
| `checked`       | Boolean | âœ…   | æ˜¯å¦é€‰ä¸­         | `true`                            |
| `merchantId`    | String  | âœ…   | å•†å®¶ ID          | `"system"`                        |
| `merchantName`  | String  | âœ…   | å•†å®¶åç§°         | `"ç³»ç»Ÿç®¡ç†å‘˜"`                    |
| `createTime`    | Date    | âœ…   | åŠ å…¥è´­ç‰©è½¦æ—¶é—´   | `2025-06-15T18:38:36.000Z`        |
| `updateTime`    | Date    | âœ…   | æœ€åæ›´æ–°æ—¶é—´     | `2025-06-15T18:40:05.000Z`        |

### ä¸šåŠ¡é€»è¾‘è¯´æ˜

1. **è´­ç‰©è½¦åˆ†ç»„**: æŒ‰ `merchantId` åˆ†ç»„æ˜¾ç¤ºï¼ŒåŒä¸€å•†å®¶çš„å•†å“å½’ä¸ºä¸€ç»„
2. **é€‰ä¸­çŠ¶æ€**: æ”¯æŒå•é€‰ã€å•†å®¶å…¨é€‰ã€å…¨é€‰åŠŸèƒ½
3. **åº“å­˜æ§åˆ¶**: `quantity` ä¸èƒ½è¶…è¿‡ `stock`
4. **ä»·æ ¼è®¡ç®—**: åŸºäº `price` Ã— `quantity` è®¡ç®—æ€»ä»·
5. **æ•°æ®åŒæ­¥**: å•†å“ä¿¡æ¯ä» `books` é›†åˆåŒæ­¥ï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´

---

## ğŸ—‚ï¸ äº‘å­˜å‚¨ç»“æ„

**äº‘å­˜å‚¨è·¯å¾„**: `cloud://cloud1-8gbfcrr39555713f/`

```
cloud://cloud1-8gbfcrr39555713f/
â”œâ”€â”€ book-covers/                    # ğŸ“š å›¾ä¹¦å°é¢
â”‚   â””â”€â”€ {timestamp}_{random}.jpg   # æ ¼å¼ï¼š1749909745183_yptr84wow.jpg
â”œâ”€â”€ book-details/                   # ğŸ“– å›¾ä¹¦è¯¦æƒ…å›¾ç‰‡
â”‚   â””â”€â”€ {timestamp}_{random}.jpg   # å•†å“è¯¦æƒ…é¡µå¤šå›¾å±•ç¤º
â”œâ”€â”€ banners/                        # ğŸ¨ è½®æ’­å›¾
â”‚   â””â”€â”€ banner1.jpg                # é¦–é¡µè½®æ’­å›¾ç‰‡
â””â”€â”€ avatars/                        # ğŸ‘¤ ç”¨æˆ·å¤´åƒ
    â””â”€â”€ {userId}_{timestamp}.jpg   # ç”¨æˆ·è‡ªå®šä¹‰å¤´åƒ
```

### æ–‡ä»¶å‘½åè§„èŒƒ

| ç›®å½•            | å‘½åæ ¼å¼                   | è¯´æ˜               | ç¤ºä¾‹                          |
| --------------- | -------------------------- | ------------------ | ----------------------------- |
| `book-covers/`  | `{timestamp}_{random}.jpg` | æ—¶é—´æˆ³+éšæœºå­—ç¬¦ä¸²  | `1749909745183_yptr84wow.jpg` |
| `book-details/` | `{timestamp}_{random}.jpg` | åŒä¸Šï¼Œæ”¯æŒå¤šå›¾     | `1749909745184_abc123.jpg`    |
| `banners/`      | `banner{n}.jpg`            | å›ºå®šå‘½åï¼Œä¾¿äºç®¡ç† | `banner1.jpg`, `banner2.jpg`  |
| `avatars/`      | `{userId}_{timestamp}.jpg` | ç”¨æˆ· ID+æ—¶é—´æˆ³     | `user123_1749909745183.jpg`   |

### å­˜å‚¨å®¹é‡è§„åˆ’

| æ–‡ä»¶ç±»å‹ | å•æ–‡ä»¶å¤§å° | é¢„ä¼°æ•°é‡ | æ€»å®¹é‡     |
| -------- | ---------- | -------- | ---------- |
| å›¾ä¹¦å°é¢ | 100KB      | 500+     | ~50MB      |
| å›¾ä¹¦è¯¦æƒ… | 200KB      | 1000+    | ~200MB     |
| è½®æ’­å›¾   | 500KB      | 10       | ~5MB       |
| ç”¨æˆ·å¤´åƒ | 100KB      | 1000+    | ~100MB     |
| **æ€»è®¡** | -          | -        | **~355MB** |

---

## ğŸ”§ æ•°æ®åº“ç´¢å¼•å»ºè®®

### books é›†åˆ

```javascript
// å•†å“æŸ¥è¯¢ç´¢å¼•
db.collection("books").createIndex({
  status: 1,
  categoryId: 1,
  createTime: -1,
});

// å•†å®¶å•†å“ç´¢å¼•
db.collection("books").createIndex({
  merchantId: 1,
  status: 1,
});

// æœç´¢ç´¢å¼•
db.collection("books").createIndex({
  title: "text",
  author: "text",
  description: "text",
});
```

### cart é›†åˆ

```javascript
// ç”¨æˆ·è´­ç‰©è½¦ç´¢å¼•
db.collection("cart").createIndex({
  openid: 1,
  createTime: -1,
});

// å•†å“å…³è”ç´¢å¼•
db.collection("cart").createIndex({
  bookId: 1,
});
```

### users é›†åˆ

```javascript
// ç”¨æˆ·æŸ¥è¯¢ç´¢å¼•
db.collection("users").createIndex(
  {
    openid: 1,
  },
  { unique: true }
);

// å•†å®¶æŸ¥è¯¢ç´¢å¼•
db.collection("users").createIndex({
  isMerchant: 1,
  merchantStatus: 1,
});
```

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡å­—æ®µ

### è‡ªåŠ¨æ›´æ–°å­—æ®µ

ä»¥ä¸‹å­—æ®µé€šè¿‡äº‘å‡½æ•°è‡ªåŠ¨ç»´æŠ¤ï¼š

| é›†åˆ    | å­—æ®µ         | æ›´æ–°æ—¶æœº            | è¯´æ˜         |
| ------- | ------------ | ------------------- | ------------ |
| `books` | `sales`      | è®¢å•å®Œæˆæ—¶          | ç´¯è®¡é”€é‡     |
| `books` | `views`      | å•†å“è¯¦æƒ…é¡µè®¿é—®æ—¶    | æµè§ˆæ¬¡æ•°     |
| `books` | `updateTime` | ä»»ä½•ä¿®æ”¹æ—¶          | æœ€åæ›´æ–°æ—¶é—´ |
| `cart`  | `updateTime` | æ•°é‡/é€‰ä¸­çŠ¶æ€å˜æ›´æ—¶ | æœ€åæ›´æ–°æ—¶é—´ |

---

## ğŸ”’ æ•°æ®æƒé™è¯´æ˜

### é›†åˆæƒé™é…ç½®

| é›†åˆå  | è¯»æƒé™   | å†™æƒé™        | è¯´æ˜             |
| ------- | -------- | ------------- | ---------------- |
| `books` | æ‰€æœ‰ç”¨æˆ· | ä»…ç®¡ç†å‘˜/å•†å®¶ | å•†å“ä¿¡æ¯å…¬å¼€å¯è¯» |
| `users` | ä»…åˆ›å»ºè€… | ä»…åˆ›å»ºè€…      | ç”¨æˆ·éšç§ä¿¡æ¯ä¿æŠ¤ |
| `cart`  | ä»…åˆ›å»ºè€… | ä»…åˆ›å»ºè€…      | è´­ç‰©è½¦ä¸ªäººæ•°æ®   |

### äº‘å‡½æ•°æƒé™

æ‰€æœ‰æ•°æ®æ“ä½œé€šè¿‡äº‘å‡½æ•°è¿›è¡Œï¼Œç¡®ä¿ï¼š

- æ•°æ®è®¿é—®æƒé™æ§åˆ¶
- ä¸šåŠ¡é€»è¾‘ä¸€è‡´æ€§
- æ•°æ®å®‰å…¨æ€§éªŒè¯

---

## ğŸ“ ç»´æŠ¤è¯´æ˜

### æ•°æ®æ¸…ç†ç­–ç•¥

1. **è´­ç‰©è½¦æ•°æ®**: è¶…è¿‡ 30 å¤©æœªæ›´æ–°çš„è®°å½•è‡ªåŠ¨æ¸…ç†
2. **å›¾ç‰‡æ–‡ä»¶**: å®šæœŸæ¸…ç†æœªå…³è”çš„å›¾ç‰‡æ–‡ä»¶
3. **ç”¨æˆ·æ•°æ®**: éµå¾ªç”¨æˆ·éšç§ä¿æŠ¤æ”¿ç­–

### å¤‡ä»½ç­–ç•¥

1. **æ•°æ®åº“**: æ¯æ—¥è‡ªåŠ¨å¤‡ä»½
2. **äº‘å­˜å‚¨**: é‡è¦å›¾ç‰‡å¼‚åœ°å¤‡ä»½
3. **æ—¥å¿—è®°å½•**: ä¿ç•™æœ€è¿‘ 30 å¤©çš„æ“ä½œæ—¥å¿—

---

_æœ€åæ›´æ–°æ—¶é—´: 2025 å¹´ 6 æœˆ 15 æ—¥_
_æ–‡æ¡£ç‰ˆæœ¬: v1.0_
