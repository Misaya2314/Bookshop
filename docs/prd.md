校园书商微信小程序需求文档
一、项目概述
项目名称：学长二手书微信小程序
技术平台：微信云开发（CloudBase）
目标用户：在校学生（买家）+ 老生商家（卖家）
项目目标：打造一个专为校园服务的图书电商平台，支持专业书籍的分类选购、微信支付、固定校内地址配送，并允许学生（老生）自主申请成为商家上传并售卖图书。
开发过程中使用 TDesign 组件库

二、整体架构
本小程序基于微信云开发平台，利用其提供的云函数、数据库、云存储、身份鉴权等能力，构建完整的前后端一体化服务。

模块划分
首页（推荐、搜索）

分类页（按专业分类）

商品详情页

购物车页

订单页

我的（用户中心）

登录/授权页

入驻申请页（老生商家申请）

商家后台入口页（仅商家用户可访问）

三、功能需求

1. 用户功能模块（买家）
   1.1 登录与授权
   使用微信授权登录，获取用户 openid。

首次登录需绑定手机号，选择所在校区与专业。

登录后才能进行购买与查看订单等操作。

1.2 首页
推荐图书展示（按热度、上新、促销排序）。

支持关键词搜索书名、作者。

1.3 分类页面
按照专业进行一级分类，如：

计算机、医学、管理、英语、法律等。

二级分类为书籍类型（教材、参考书、考研资料等）。

1.4 商品详情
展示书籍基本信息（名称、作者、出版社、ISBN、价格、库存、简介等）。

支持加入购物车、立即购买。

可展示评论区（可选）。

1.5 购物车
支持添加、删除、修改商品数量。

购物车结算前校验库存。

1.6 提交订单
用户在购买时需选择固定地址（如：

A 校区宿舍 1 号楼、B 校区教学楼前自提点等）。

支持备注功能（例如备注送书时间段）。

使用微信支付完成支付。

1.7 订单管理
查看订单状态：待支付、待发货、待收货、已完成、已取消。

可申请取消订单（发货前）。

后期可支持申请售后。

1.8 我的页面
展示头像、昵称、手机号、专业、校区。

修改个人信息（专业、地址）。

查看订单记录。

入口按钮：“申请成为商家”。

2. 商家功能模块（卖家）
   2.1 入驻申请页面（老生申请入驻）
   提交申请表单：

姓名、手机号、学院、专业、学号、联系方式（如微信号）、简要说明申请理由。

上传学生证或毕业证图片。

系统后台记录申请数据，管理员审核（手动通过或拒绝）。

审核通过后，用户变更为“商家身份”，自动解锁商家后台入口。

2.2 商家后台入口页（仅限审核通过用户访问）
商品管理：上架书籍、修改信息、设置价格与库存。

订单管理：查看订单、更新发货状态。

分类选择：商家只能选择现有的专业与子分类上传图书。

数据统计（后期迭代）：展示销售数据、库存告警等。

四、收货地址设计
固定地址模型：

地址项由平台预设，例如：

A 校区一号宿舍

A 校区图书馆门口

B 校区教学楼前自提点

用户仅能从中选择。

地址管理页面：

显示当前默认地址。

支持更换默认地址（从预设列表中选）。

五、微信支付接入
接入微信云开发支付能力（cloud.callFunction + 微信商户平台）。

支持生成预支付订单 → 微信支付 → 云函数校验支付状态 → 更新订单状态。

六、数据库设计（简要概述）
集合名称 功能描述
users 存储用户基本信息（openid、校区、专业、身份）
books 存储图书信息、分类、库存等
cart 用户购物车记录
orders 用户订单记录
address_pool 预设收货地址列表
applications 入驻申请记录
merchant 商家信息（与用户绑定）

七、角色与权限说明
角色 权限说明
普通用户 浏览、下单、支付、查看订单、修改个人信息、提交申请
商家 上架图书、管理库存、处理订单、发货
管理员 审核入驻申请、管理用户权限、维护分类与地址、管理违规商品

八、非功能性需求
性能：首页加载 < 3 秒，支付响应时间 < 2 秒。

安全性：

用户数据加密存储。

云函数权限配置严格限制访问。

兼容性：适配主流微信版本与屏幕尺寸。
