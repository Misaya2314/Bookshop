# 学院分类系统测试清单

## 🧪 测试验证清单

### 1. 编译验证 ✅

- [x] TypeScript 编译通过
- [x] 无 linter 错误
- [x] 模块导入正常

### 2. 数据结构验证

- [ ] 学院数据正确加载
- [ ] 专业数据动态更新
- [ ] 向后兼容性正常

### 3. 功能测试

#### 3.1 分类页面 (`miniprogram/pages/category/`)

- [ ] 左侧显示 17 个学院
- [ ] 点击学院，右侧专业列表更新
- [ ] 选择专业，图书列表正确筛选
- [ ] 搜索功能正常工作

#### 3.2 商家后台 (`miniprogram/pages/merchant-dashboard/`)

- [ ] 添加商品：学院选择器正常显示
- [ ] 添加商品：选择学院后专业列表更新
- [ ] 添加商品：保存时数据正确传递
- [ ] 编辑商品：分类信息正确回显
- [ ] 编辑商品：修改分类正常保存

#### 3.3 云函数验证

- [ ] `getBooksByCollege` 接口正常工作
- [ ] 支持按学院 ID 筛选
- [ ] 支持按专业 ID 筛选
- [ ] 返回数据结构正确

### 4. 测试步骤

#### 步骤 1: 基础验证

```bash
# 1. 检查编译
在微信开发者工具中编译项目，确认无错误

# 2. 检查数据导入
console.log('学院数据:', collegeData)
console.log('第一个学院的专业:', getMajorsByCollegeId(1))
```

#### 步骤 2: 分类页面测试

1. 打开分类页面
2. 验证左侧学院列表显示
3. 点击"管理学院"
4. 验证右侧专业显示：旅游管理、工商管理等
5. 选择"旅游管理"专业
6. 验证图书列表更新

#### 步骤 3: 商家后台测试

1. 打开商家后台
2. 点击"添加商品"
3. 在学院选择器中选择"管理学院"
4. 验证专业选择器更新为管理学院的专业
5. 选择"旅游管理"专业
6. 填写其他信息并保存
7. 验证商品保存成功

#### 步骤 4: 编辑商品测试

1. 编辑已有商品
2. 验证学院和专业正确回显
3. 修改学院为"计算机科学与工程学院"
4. 验证专业列表更新
5. 保存并验证修改成功

### 5. 调试信息

如果出现问题，检查以下信息：

```javascript
// 在分类页面 category.ts 中添加调试信息
console.log("当前学院:", this.data.selectedCollege);
console.log("当前专业:", this.data.selectedMajor);
console.log("专业列表:", this.data.majors);

// 在商家后台 merchant-dashboard.ts 中添加调试信息
console.log("学院选项:", this.data.collegeOptions);
console.log("专业选项:", this.data.majorOptions);
console.log("表单数据:", this.data.productForm);
```

### 6. 常见问题排查

#### Q: 专业列表不更新

**解决方案:**

1. 检查 `college-data.ts` 文件是否正确导入
2. 验证学院 ID 是否匹配
3. 检查 `getMajorsByCollegeId` 函数返回值

#### Q: 保存商品时报错

**解决方案:**

1. 确认云函数已正确部署
2. 检查控制台错误日志
3. 验证传递的数据格式

#### Q: 编辑商品时数据不回显

**解决方案:**

1. 检查产品数据是否包含新的学院字段
2. 验证索引计算逻辑
3. 确认 majorOptions 正确更新

### 7. 验收标准

所有测试项目通过后，学院分类系统即可投入使用：

- ✅ 编译无错误
- ✅ 17 个学院正确显示
- ✅ 专业列表动态更新
- ✅ 商品添加功能正常
- ✅ 商品编辑功能正常
- ✅ 云函数接口正常
- ✅ 数据保存正确

### 8. 部署检查清单

最终部署前确认：

- [ ] 云函数 `books` 已上传并部署
- [ ] 小程序代码已编译通过
- [ ] 测试环境验证完成
- [ ] 生产环境准备就绪

---

**测试完成后，您的学院分类系统将完全就绪！** 🎉

