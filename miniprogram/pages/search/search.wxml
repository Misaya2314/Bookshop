<!-- æœç´¢æ  -->
<view class="search-header">
  <t-search 
    model:value="{{searchValue}}" 
    placeholder="æœç´¢å•†å“..." 
    bind:submit="onSearch"
    bind:clear="onClear"
    autofocus="{{true}}"
  />
</view>

<!-- æœç´¢å»ºè®®/å†å² -->
<view class="search-content" wx:if="{{!searchValue && !searched}}">
  <!-- æœç´¢å†å² -->
  <view class="search-section" wx:if="{{searchHistory.length > 0}}">
    <view class="section-header">
      <text class="section-title">æœç´¢å†å²</text>
      <text class="clear-btn" bindtap="clearHistory">æ¸…é™¤</text>
    </view>
    <view class="tag-list">
      <view 
        class="tag-item" 
        wx:for="{{searchHistory}}" 
        wx:key="*this"
        bindtap="searchKeyword"
        data-keyword="{{item}}"
      >
        {{item}}
      </view>
    </view>
  </view>

  <!-- çƒ­é—¨æœç´¢ -->
  <view class="search-section">
    <view class="section-header">
      <text class="section-title">çƒ­é—¨æœç´¢</text>
    </view>
    <view class="tag-list">
      <view 
        class="tag-item hot-tag" 
        wx:for="{{hotKeywords}}" 
        wx:key="*this"
        bindtap="searchKeyword"
        data-keyword="{{item}}"
      >
        {{item}}
      </view>
    </view>
  </view>
</view>

<!-- æœç´¢ç»“æœ -->
<view class="search-results" wx:if="{{searched}}">
  <!-- ç»“æœç»Ÿè®¡ -->
  <view class="result-stats">
    æ‰¾åˆ° {{total}} ä¸ªç»“æœ
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>æœç´¢ä¸­...</text>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="book-list" wx:if="{{!loading}}">
    <view 
      class="book-item" 
      wx:for="{{books}}" 
      wx:key="_id"
      bindtap="goToDetail"
      data-id="{{item._id}}"
    >
      <view class="book-cover">
        <text class="book-emoji">{{item.icon || 'ğŸ“–'}}</text>
      </view>
      <view class="book-info">
        <text class="book-title">{{item.title}}</text>
        <text class="book-author">{{item.author}}</text>
        <view class="book-footer">
          <text class="book-price">Â¥{{item.price}}</text>
          <view class="book-stats">
            <text class="book-sales">å·²å”®{{item.sales}}ä»¶</text>
            <text class="book-stock">åº“å­˜{{item.stock}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ— ç»“æœ -->
  <view class="no-result" wx:if="{{!loading && books.length === 0}}">
    <text class="no-result-text">æœªæ‰¾åˆ°ç›¸å…³å•†å“</text>
    <text class="no-result-tip">è¯•è¯•å…¶ä»–å…³é”®è¯å§</text>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore && !loading && books.length > 0}}">
    <text bindtap="loadMore">åŠ è½½æ›´å¤š</text>
  </view>
</view> 